"use strict";(self.webpackChunkav_docusaurus_classic=self.webpackChunkav_docusaurus_classic||[]).push([[445],{8290:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"system-design/concepts/message-queue","title":"Message Queueing","description":"Problem","source":"@site/docs/system-design/concepts/message-queue.md","sourceDirName":"system-design/concepts","slug":"/system-design/concepts/message-queue","permalink":"/av-docs/docs/system-design/concepts/message-queue","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/system-design/concepts/message-queue.md","tags":[],"version":"current","frontMatter":{}}');var t=n(4848),i=n(8453);const o={},a="Message Queueing",c={},l=[{value:"<strong>Problem</strong>",id:"problem",level:2},{value:"<strong>Purpose:</strong>",id:"purpose",level:2},{value:"<strong>Building blocks:</strong>",id:"building-blocks",level:2},{value:"<strong>Patterns:</strong>",id:"patterns",level:2}];function d(e){const s={a:"a",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"message-queueing",children:"Message Queueing"})}),"\n",(0,t.jsx)(s.h2,{id:"problem",children:(0,t.jsx)(s.strong,{children:"Problem"})}),"\n",(0,t.jsx)(s.p,{children:"E-commerce app with a shopping cart service connecting directly to inventory service over a TCP connection to check stock availability on each item added to shopping cart. Process is synchronous, waits for add to cart request to finish. Inventory service may crash in peak hours or be down for other reasons what results in Cart service not responding and failing as well."}),"\n",(0,t.jsx)(s.h2,{id:"purpose",children:(0,t.jsx)(s.strong,{children:"Purpose:"})}),"\n",(0,t.jsx)(s.p,{children:"Breaks applications apart with asynchronous communication."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["De-couples components. Producers and Consumers do not need to know anything about one another, allowing systems to be more ",(0,t.jsx)(s.strong,{children:"modular"})," and ",(0,t.jsx)(s.strong,{children:"scalable"}),". Especially valuable in microservices for multiple independent services to communicate."]}),"\n",(0,t.jsxs)(s.li,{children:["Load Management. Storing incoming messages and releasing them gradually to consumers as they\u2019re ready ",(0,t.jsx)(s.strong,{children:"prevents overloading"})," of services during peak times and smooths out traffic spikes."]}),"\n",(0,t.jsxs)(s.li,{children:["Reliability and fault tolerance. Supports message ",(0,t.jsx)(s.strong,{children:"persistence"}),", ",(0,t.jsx)(s.strong,{children:"acknowledgements"}),"* and ",(0,t.jsx)(s.strong,{children:"retries"})," which help to ensure messages are delivered even if a consumer or producer goes down. This reliability is critical in applications where messages represent important transactions or user actions."]}),"\n",(0,t.jsx)(s.li,{children:"Queue itself can be on its own machine, offloading some of work from web application and make the whole system more performant."}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"*acknowledgement(ACK) - a signal that a device sends to indicate that data has been received successfully."}),"\n",(0,t.jsx)(s.h2,{id:"building-blocks",children:(0,t.jsx)(s.strong,{children:"Building blocks:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["message:","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"contains data that needs to get transmitted"}),"\n",(0,t.jsx)(s.li,{children:"types of data formats"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["queue:","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"line of messages"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.li,{children:"producer: creates/writes the message"}),"\n",(0,t.jsx)(s.li,{children:"consumer: consumes/reads the message"}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Managed by messages brokers such as ",(0,t.jsx)(s.a,{href:"/av-docs/docs/system-design/software/rabbitmq/",children:"Rabbitmq"}),", ",(0,t.jsx)(s.a,{href:"/av-docs/docs/system-design/software/kafka/",children:"Apache Kafka"})," or ",(0,t.jsx)(s.a,{href:"https://aws.amazon.com/sqs/",children:"AWS SQS"}),"."]}),"\n",(0,t.jsx)(s.p,{children:"Use cases could be:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Task distribution - offloading background jobs to worker processes."}),"\n",(0,t.jsx)(s.li,{children:"Event-driven processing - updating a database when a new order is placed."}),"\n",(0,t.jsx)(s.li,{children:"Real-time messaging/chat applications."}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"patterns",children:(0,t.jsx)(s.strong,{children:"Patterns:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.strong,{children:"Pub/Sub"})}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"New user order, notifying interested systems of current status, and in each status according system performs necessary algorithm for example packaging, shipping, delivering and when delivered informing end user."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.strong,{children:"Request-reply-reply-request"})}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"User search request on System A sent to queue, System B applied algorithm. System B sends request of successful algorithm and has response, System A sees that search was done and consumes the response."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.strong,{children:"Point-to-point"})}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"From Producer System A to Consumer System B.\nFor example: user filled in the web form. Meta data of form JSON object pushed into the queue, which can be consumed later to enter into database, insert into other system for marketing automation, metrics."}),"\n",(0,t.jsx)(s.hr,{})]})}function u(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>a});var r=n(6540);const t={},i=r.createContext(t);function o(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);